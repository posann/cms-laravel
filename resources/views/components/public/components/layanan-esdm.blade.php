<section class="py-6 sm:py-8 md:py-12 lg:py-16 bg-gray-50 overflow-hidden">
  <div class="px-4 sm:px-6 md:px-8 lg:px-12 xl:px-16 2xl:px-20">
    <div class="flex items-center justify-between mb-6 sm:mb-8">
      <h2 class="text-lg sm:text-xl md:text-2xl lg:text-3xl font-bold text-gray-900">Layanan Publik</h2>
      <div class="flex items-center gap-1.5 sm:gap-2">
        <div class="w-2.5 h-2.5 sm:w-3 sm:h-3 rounded-full bg-primary-700"></div>
        <div class="w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full bg-gray-300"></div>
        <div class="w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full bg-gray-300"></div>
      </div>
    </div>

    <div class="relative">
      <!-- container scroll -->
      <div id="infinite-scroll-container" class="flex overflow-x-auto scrollbar-hide py-3 sm:py-4">
        <!-- track: menampung original + duplicate sebagai satu baris -->
        <div id="scroll-track" class="inline space-x-3 sm:space-x-4 md:space-x-6">
          <!-- ORIGINAL CONTENT (letakkan semua kartu di sini, hanya sekali) -->
          <div id="scroll-content" class="flex space-x-3 sm:space-x-4 md:space-x-6">

            <a href="https://perizinan.esdm.go.id/minerba" target="_blank"
                class="service-card bg-gray-200 rounded-xl h-full p-2 max-w-48 sm:max-w-56 md:max-w-60 relative overflow-hidden transition-transform duration-300">
                <div class="absolute inset-0 bg-cover bg-center"
                    style="background-image: url('{{ asset('images/asset/card-bg.png') }}')"></div>
                <div class="flex flex-col justify-between h-full">
                    <div
                        class="relative z-10 flex flex-col items-start text-start bg-white/60 px-3 sm:px-4 py-4 sm:py-6 rounded-lg grow">
                        <div
                            class="w-30 h-30 sm:w-32 sm:h-32 md:w-36 md:h-36 mb-2 sm:mb-3 md:mb-4 flex items-center justify-center">
                            <img src="https://www.minerba.esdm.go.id/upload/tautan/20250120141049.png"
                                alt="WBS ESDM Logo" class="w-full h-full object-contain">
                        </div>
                        <h3 class="text-xs sm:text-sm md:text-base font-semibold text-gray-900 mb-1">Perizinan</h3>
                        <p
                            class="text-sm sm:text-[1rem]/[160%] text-gray-600 mb-2 sm:mb-3 md:mb-4 leading-tight font-roboto">
                            Informasi dan Layanan Perizinan Minerba</p>
                    </div>
                    <div class="flex justify-between items-center pt-2">
                        <div
                            class="text-black font-roboto text-xs font-medium px-3 sm:px-4 py-1.5 sm:py-2 rounded-md transition-colors duration-300">
                            KUNJUNGI</div>
                        <div class="flex items-center justify-center z-10 px-3 sm:px-4">
                            <svg class="w-3 h-3 sm:w-4 sm:h-4" fill="#000000" viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
                                    clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </a>

            <a href="https://epnbpminerba.esdm.go.id/v2" target="_blank"
                class="service-card bg-gray-200 rounded-xl h-full p-2 max-w-48 sm:max-w-56 md:max-w-60 relative overflow-hidden transition-transform duration-300">
                <div class="absolute inset-0 bg-cover bg-center"
                    style="background-image: url('{{ asset('images/asset/card-bg.png') }}')"></div>
                <div class="flex flex-col justify-between h-full">
                    <div
                        class="relative z-10 flex flex-col items-start text-start bg-white/60 px-3 sm:px-4 py-4 sm:py-6 rounded-lg grow">
                        <div
                            class="w-30 h-30 sm:w-32 sm:h-32 md:w-36 md:h-36 mb-2 sm:mb-3 md:mb-4 flex items-center justify-center">
                            <img src="https://www.minerba.esdm.go.id/upload/tautan/20250120141535.png"
                                alt="e-PNBP Minerba Logo" class="w-full h-full object-contain">
                        </div>
                        <h3 class="text-xs sm:text-sm md:text-base font-semibold text-gray-900 mb-1">e-PNBP
                            Minerba</h3>
                        <p
                            class="text-sm sm:text-[1rem]/[160%] text-gray-600 mb-2 sm:mb-3 md:mb-4 leading-tight font-roboto">
                            Sistem pelaporan Penerimaan Negara Bukan Pajak</p>
                    </div>
                    <div class="flex justify-between items-center pt-2">
                        <div
                            class="text-black font-roboto text-xs font-medium px-3 sm:px-4 py-1.5 sm:py-2 rounded-md transition-colors duration-300">
                            KUNJUNGI</div>
                        <div class="flex items-center justify-center z-10 px-3 sm:px-4">
                            <svg class="w-3 h-3 sm:w-4 sm:h-4" fill="#000000" viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
                                    clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </a>

            <a href="https://jdih.esdm.go.id/" target="_blank"
                class="service-card bg-gray-200 rounded-xl h-full p-2 max-w-48 sm:max-w-56 md:max-w-60 relative overflow-hidden transition-transform duration-300">
                <div class="absolute inset-0 bg-cover bg-center"
                    style="background-image: url('{{ asset('images/asset/card-bg.png') }}')"></div>
                <div class="flex flex-col justify-between h-full">
                    <div
                        class="relative z-10 flex flex-col items-start text-start bg-white/60 px-3 sm:px-4 py-4 sm:py-6 rounded-lg grow">
                        <div
                            class="w-30 h-30 sm:w-32 sm:h-32 md:w-36 md:h-36 mb-2 sm:mb-3 md:mb-4 flex items-center justify-center">
                            <img src="https://www.minerba.esdm.go.id/upload/tautan/20250120141431.png"
                                alt="JDIH ESDM Logo" class="w-full h-full object-contain">
                        </div>
                        <h3 class="text-xs sm:text-sm md:text-base font-semibold text-gray-900 mb-1">JDIH ESDM
                        </h3>
                        <p
                            class="text-sm sm:text-[1rem]/[160%] text-gray-600 mb-2 sm:mb-3 md:mb-4 leading-tight font-roboto">
                            Jaringan Dokumentasi dan Informasi Hukum Kementerian ESDM</p>
                    </div>
                    <div class="flex justify-between items-center pt-2">
                        <div
                            class="text-black font-roboto text-xs font-medium px-3 sm:px-4 py-1.5 sm:py-2 rounded-md transition-colors duration-300">
                            KUNJUNGI</div>
                        <div class="flex items-center justify-center z-10 px-3 sm:px-4">
                            <svg class="w-3 h-3 sm:w-4 sm:h-4" fill="#000000" viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
                                    clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </a>

            <a href="https://esdm.go.id/inline" target="_blank"
                class="service-card bg-gray-200 rounded-xl h-full p-2 max-w-48 sm:max-w-56 md:max-w-60 relative overflow-hidden transition-transform duration-300">
                <div class="absolute inset-0 bg-cover bg-center"
                    style="background-image: url('{{ asset('images/asset/card-bg.png') }}')"></div>
                <div class="flex flex-col justify-between h-full">
                    <div
                        class="relative z-10 flex flex-col items-start text-start bg-white/60 px-3 sm:px-4 py-4 sm:py-6 rounded-lg grow">
                        <div
                            class="w-30 h-30 sm:w-32 sm:h-32 md:w-36 md:h-36 mb-2 sm:mb-3 md:mb-4 flex items-center justify-center">
                            <img src="https://www.minerba.esdm.go.id/upload/tautan/20250120141541.png"
                                alt="ESDM Inline Logo" class="w-full h-full object-contain">
                        </div>
                        <h3 class="text-xs sm:text-sm md:text-base font-semibold text-gray-900 mb-1">ESDM Inline
                        </h3>
                        <p
                            class="text-sm sm:text-[1rem]/[160%] text-gray-600 mb-2 sm:mb-3 md:mb-4 leading-tight font-roboto">
                            Layanan perizinan online terpadu sektor ESDM</p>
                    </div>
                    <div class="flex justify-between items-center pt-2">
                        <div
                            class="text-black font-roboto text-xs font-medium px-3 sm:px-4 py-1.5 sm:py-2 rounded-md transition-colors duration-300">
                            KUNJUNGI</div>
                        <div class="flex items-center justify-center z-10 px-3 sm:px-4">
                            <svg class="w-3 h-3 sm:w-4 sm:h-4" fill="#000000" viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
                                    clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </a>

            <a href="https://modi.esdm.go.id/" target="_blank"
                class="service-card bg-gray-200 rounded-xl h-full p-2 max-w-48 sm:max-w-56 md:max-w-60 relative overflow-hidden transition-transform duration-300">
                <div class="absolute inset-0 bg-cover bg-center"
                    style="background-image: url('{{ asset('images/asset/card-bg.png') }}')"></div>
                <div class="flex flex-col justify-between h-full">
                    <div
                        class="relative z-10 flex flex-col items-start text-start bg-white/60 px-3 sm:px-4 py-4 sm:py-6 rounded-lg grow">
                        <div
                            class="w-30 h-30 sm:w-32 sm:h-32 md:w-36 md:h-36 mb-2 sm:mb-3 md:mb-4 flex items-center justify-center">
                            <img src="https://www.minerba.esdm.go.id/upload/tautan/20250120141627.png"
                                alt="MODI Logo" class="w-full h-full object-contain">
                        </div>
                        <h3 class="text-xs sm:text-sm md:text-base font-semibold text-gray-900 mb-1">MODI</h3>
                        <p
                            class="text-sm sm:text-[1rem]/[160%] text-gray-600 mb-2 sm:mb-3 md:mb-4 leading-tight font-roboto">
                            Mineral Online Data Indonesia</p>
                    </div>
                    <div class="flex justify-between items-center pt-2">
                        <div
                            class="text-black font-roboto text-xs font-medium px-3 sm:px-4 py-1.5 sm:py-2 rounded-md transition-colors duration-300">
                            KUNJUNGI</div>
                        <div class="flex items-center justify-center z-10 px-3 sm:px-4">
                            <svg class="w-3 h-3 sm:w-4 sm:h-4" fill="#000000" viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
                                    clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </a>

            <a href="https://moms.esdm.go.id/" target="_blank"
                class="service-card bg-gray-200 rounded-xl h-full p-2 max-w-48 sm:max-w-56 md:max-w-60 relative overflow-hidden transition-transform duration-300">
                <div class="absolute inset-0 bg-cover bg-center"
                    style="background-image: url('{{ asset('images/asset/card-bg.png') }}')"></div>
                <div class="flex flex-col justify-between h-full">
                    <div
                        class="relative z-10 flex flex-col items-start text-start bg-white/60 px-3 sm:px-4 py-4 sm:py-6 rounded-lg grow">
                        <div
                            class="w-30 h-30 sm:w-32 sm:h-32 md:w-36 md:h-36 mb-2 sm:mb-3 md:mb-4 flex items-center justify-center">
                            <img src="https://www.minerba.esdm.go.id/upload/tautan/20250120141525.png"
                                alt="MOMS Logo" class="w-full h-full object-contain">
                        </div>
                        <h3 class="text-xs sm:text-sm md:text-base font-semibold text-gray-900 mb-1">MOMS</h3>
                        <p
                            class="text-sm sm:text-[1rem]/[160%] text-gray-600 mb-2 sm:mb-3 md:mb-4 leading-tight font-roboto">
                            Minerba One Map System</p>
                    </div>
                    <div class="flex justify-between items-center pt-2">
                        <div
                            class="text-black font-roboto text-xs font-medium px-3 sm:px-4 py-1.5 sm:py-2 rounded-md transition-colors duration-300">
                            KUNJUNGI</div>
                        <div class="flex items-center justify-center z-10 px-3 sm:px-4">
                            <svg class="w-3 h-3 sm:w-4 sm:h-4" fill="#000000" viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
                                    clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </a>

            <a href="https://georima.esdm.go.id/" target="_blank"
                class="service-card bg-gray-200 rounded-xl h-full p-2 max-w-48 sm:max-w-56 md:max-w-60 relative overflow-hidden transition-transform duration-300">
                <div class="absolute inset-0 bg-cover bg-center"
                    style="background-image: url('{{ asset('images/asset/card-bg.png') }}')"></div>
                <div class="flex flex-col justify-between h-full">
                    <div
                        class="relative z-10 flex flex-col items-start text-start bg-white/60 px-3 sm:px-4 py-4 sm:py-6 rounded-lg grow">
                        <div
                            class="w-30 h-30 sm:w-32 sm:h-32 md:w-36 md:h-36 mb-2 sm:mb-3 md:mb-4 flex items-center justify-center">
                            <img src="https://www.minerba.esdm.go.id/upload/tautan/20250120141602.png"
                                alt="Georima Logo" class="w-full h-full object-contain">
                        </div>
                        <h3 class="text-xs sm:text-sm md:text-base font-semibold text-gray-900 mb-1">Georima
                        </h3>
                        <p
                            class="text-sm sm:text-[1rem]/[160%] text-gray-600 mb-2 sm:mb-3 md:mb-4 leading-tight font-roboto">
                            Sistem Informasi Geologi, Mineral, dan Batubara</p>
                    </div>
                    <div class="flex justify-between items-center pt-2">
                        <div
                            class="text-black font-roboto text-xs font-medium px-3 sm:px-4 py-1.5 sm:py-2 rounded-md transition-colors duration-300">
                            KUNJUNGI</div>
                        <div class="flex items-center justify-center z-10 px-3 sm:px-4">
                            <svg class="w-3 h-3 sm:w-4 sm:h-4" fill="#000000" viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
                                    clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </a>

            <a href="https://mvp.esdm.go.id/login" target="_blank"
                class="service-card bg-gray-200 rounded-xl h-full p-2 max-w-48 sm:max-w-56 md:max-w-60 relative overflow-hidden transition-transform duration-300">
                <div class="absolute inset-0 bg-cover bg-center"
                    style="background-image: url('{{ asset('images/asset/card-bg.png') }}')"></div>
                <div class="flex flex-col justify-between h-full">
                    <div
                        class="relative z-10 flex flex-col items-start text-start bg-white/60 px-3 sm:px-4 py-4 sm:py-6 rounded-lg grow">
                        <div
                            class="w-30 h-30 sm:w-32 sm:h-32 md:w-36 md:h-36 mb-2 sm:mb-3 md:mb-4 flex items-center justify-center">
                            <img src="https://www.minerba.esdm.go.id/upload/tautan/20250120141619.png"
                                alt="MVP Logo" class="w-full h-full object-contain">
                        </div>
                        <h3 class="text-xs sm:text-sm md:text-base font-semibold text-gray-900 mb-1">MVP</h3>
                        <p
                            class="text-sm sm:text-[1rem]/[160%] text-gray-600 mb-2 sm:mb-3 md:mb-4 leading-tight font-roboto">
                            Minerba Verification Program</p>
                    </div>
                    <div class="flex justify-between items-center pt-2">
                        <div
                            class="text-black font-roboto text-xs font-medium px-3 sm:px-4 py-1.5 sm:py-2 rounded-md transition-colors duration-300">
                            KUNJUNGI</div>
                        <div class="flex items-center justify-center z-10 px-3 sm:px-4">
                            <svg class="w-3 h-3 sm:w-4 sm:h-4" fill="#000000" viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
                                    clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </a>

            <a href="https://erkab.esdm.go.id/" target="_blank"
                class="service-card bg-gray-200 rounded-xl h-full p-2 max-w-48 sm:max-w-56 md:max-w-60 relative overflow-hidden transition-transform duration-300">
                <div class="absolute inset-0 bg-cover bg-center"
                    style="background-image: url('{{ asset('images/asset/card-bg.png') }}')"></div>
                <div class="flex flex-col justify-between h-full">
                    <div
                        class="relative z-10 flex flex-col items-start text-start bg-white/60 px-3 sm:px-4 py-4 sm:py-6 rounded-lg grow">
                        <div
                            class="w-30 h-30 sm:w-32 sm:h-32 md:w-36 md:h-36 mb-2 sm:mb-3 md:mb-4 flex items-center justify-center">
                            <img src="https://www.minerba.esdm.go.id/upload/tautan/20250120141633.png"
                                alt="Erkab Logo" class="w-full h-full object-contain">
                        </div>
                        <h3 class="text-xs sm:text-sm md:text-base font-semibold text-gray-900 mb-1">Erkab</h3>
                        <p
                            class="text-sm sm:text-[1rem]/[160%] text-gray-600 mb-2 sm:mb-3 md:mb-4 leading-tight font-roboto">
                            Aplikasi Rencana Kerja dan Anggaran Biaya</p>
                    </div>
                    <div class="flex justify-between items-center pt-2">
                        <div
                            class="text-black font-roboto text-xs font-medium px-3 sm:px-4 py-1.5 sm:py-2 rounded-md transition-colors duration-300">
                            KUNJUNGI</div>
                        <div class="flex items-center justify-center z-10 px-3 sm:px-4">
                            <svg class="w-3 h-3 sm:w-4 sm:h-4" fill="#000000" viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
                                    clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>
                </div>
            </a>

          </div>

          <!-- DUPLICATE: akan diisi oleh JS (jangan isi manual) -->
          {{-- <div id="scroll-content-duplicate" class="flex space-x-3 sm:space-x-4 md:space-x-6" aria-hidden="true"></div> --}}
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar { display: none; }

  /* container */
  #infinite-scroll-container {
    cursor: grab;
    scroll-behavior: smooth;
    user-select: none;
    -webkit-overflow-scrolling: touch;
  }

  #infinite-scroll-container:active { cursor: grabbing; }

  /* track: keep original + duplicate on same line */
  #scroll-track { display: flex; align-items: stretch; }

  /* each card must not shrink or grow and must align for scroll snapping */
  .service-card {
    flex: 0 0 auto;       /* very important */
    scroll-snap-align: start;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const container = document.getElementById('infinite-scroll-container');
    const content = document.getElementById('scroll-content');
    // const duplicate = document.getElementById('scroll-content-duplicate');

    // Clone the original content ONCE
    // duplicate.innerHTML = content.innerHTML;

    // DRAG-TO-SCROLL
    let isDown = false, startX = 0, scrollLeft = 0;
    container.addEventListener('mousedown', (e) => {
      isDown = true;
      container.style.cursor = 'grabbing';
      startX = e.pageX - container.offsetLeft;
      scrollLeft = container.scrollLeft;
      if (window.__infiniteRaf) cancelAnimationFrame(window.__infiniteRaf);
    });

    container.addEventListener('mouseleave', () => {
      isDown = false;
      container.style.cursor = 'grab';
      startAutoScroll();
    });

    container.addEventListener('mouseup', () => {
      isDown = false;
      container.style.cursor = 'grab';
      startAutoScroll();
    });

    container.addEventListener('mousemove', (e) => {
      if (!isDown) return;
      e.preventDefault();
      const x = e.pageX - container.offsetLeft;
      const walk = (x - startX) * 1.5; // adjust sensitivity
      container.scrollLeft = scrollLeft - walk;
    });

    // Touch support for mobile
    container.addEventListener('touchstart', (e) => {
      startX = e.touches[0].pageX - container.offsetLeft;
      scrollLeft = container.scrollLeft;
      if (window.__infiniteRaf) cancelAnimationFrame(window.__infiniteRaf);
    }, {passive: true});

    container.addEventListener('touchmove', (e) => {
      const x = e.touches[0].pageX - container.offsetLeft;
      const walk = (x - startX) * 1.5;
      container.scrollLeft = scrollLeft - walk;
    }, {passive: true});

    container.addEventListener('touchend', () => {
      startAutoScroll();
    });

    // AUTO INFINITE SCROLL (loop)
    function startAutoScroll() {
      const originalWidth = content.scrollWidth; // width of original block
      const speed = 0.3; // px per frame, tweak as needed

      function step() {
        container.scrollLeft += speed;
        // when we've scrolled past original width, wrap back
        if (container.scrollLeft >= originalWidth) {
          container.scrollLeft -= originalWidth;
        }
        window.__infiniteRaf = requestAnimationFrame(step);
      }

      // ensure only one RAF runs
      if (window.__infiniteRaf) cancelAnimationFrame(window.__infiniteRaf);
      window.__infiniteRaf = requestAnimationFrame(step);
    }

    // start auto-scroll
    startAutoScroll();

    // recalc widths on resize (helps keep the loop seamless)
    window.addEventListener('resize', () => {
      // small timeout to allow layout reflow
      setTimeout(() => {
        // if you want to recalc cached widths, do it here
      }, 150);
    });
  });
</script>
